# Example configuration for the narrative framing workflow.
corpus: mediacloud_india_coal
corpora_root: corpora
workspace_root: workspace

# Narrative framing parameters
domain: "India coal media coverage"
# Model configurations - use more powerful model for induction, lighter for application
induction_model: gpt-5-nano  # More powerful model for frame induction
application_model: gpt-5-nano  # Lighter model for frame application
# Target number of frames to induce (string or integer). Examples: "between 6 and 10", 8
induction_frame_target: "between 6 and 10"
# Temperature settings (optional - will use model defaults if not specified)
# induction_temperature: 0.0  # Override for induction (will be adjusted to 1.0 for gpt-5-nano)
# application_temperature: 0.0  # Override for application (will be adjusted to 1.0 for gpt-5-nano)
seed: 42

# Filter configuration
filter:
  # Only consider documents on/after this date (YYYY-MM-DD)
  date_from: "2023-01-01"
  
  # Document-level filters (applied when selecting documents)
  document:
    keywords:
      - coal  # Documents must contain at least one chunk with these keywords
    # Optional: exclude documents matching these patterns
    # exclude_regex:
    #   - '(?i)(STOCKS & SCREENERS|Top Calculators|Stock Screener)'
    # Optional: exclude documents with too many hits of certain phrases
    # exclude_min_hits:
    #   share price: 3
    # Optional: trim document text after these markers
    # trim_after_markers:
    #   - End of Article
    #   - FOLLOW US ON SOCIAL MEDIA
  
  # Chunk-level filters (applied to individual chunks within documents)
  chunk:
    keywords:
      - coal  # Chunks must contain these keywords (optional, can be different from document keywords)
    # Optional: exclude chunks matching these regex patterns
    exclude_regex:
      - '(?i)(STOCKS & SCREENERS|Top Calculators|Stock Screener)'
    # Optional: exclude chunks with too many hits of certain phrases
    exclude_min_hits:
      share price: 3
    # Optional: trim chunk text after these markers
    trim_after_markers:
      - End of Article
      - FOLLOW US ON SOCIAL MEDIA

# Legacy filter fields (deprecated, use filter.* instead) - kept for backward compatibility
# filter_keywords:
#   - coal
# filter_exclude_regex:
#   - '(?i)(STOCKS & SCREENERS|Top Calculators|Stock Screener)'
# filter_exclude_min_hits:
#   share price: 3
# filter_trim_after_markers:
#   - End of Article
#   - FOLLOW US ON SOCIAL MEDIA
# date_from: "2023-01-01"

# Report configuration
report:
  title: "Air Pollution Causes in Indonesian Media"  # Optional: custom report title
  subtitle: "Analysis of media framing around air pollution sources"  # Optional: custom subtitle
  note: "This analysis covers {n_articles} articles from Indonesian media sources"  # Optional: custom note with {n_articles} placeholder
  hide_empty_passages: false  # Hide passages with no frame assignments
target_words: 200
# chunker_model: en_core_web_sm  # spaCy model for text chunking (default: en_core_web_sm). Use id_core_news_sm for Indonesian, etc.
induction_sample_size: 100
application_sample_size: 1200
application_batch_size: 8
application_top_k: 100
reload_induction: true
reload_application: true
reload_classifier: true
reload_classifications: true
reload_document_aggregates: false
reload_time_series: false
results_dir: results/narrative_framing
induction_guidance: |
  Start by inducing a set of distinct, non-overlapping frames relevant to this domain. 
  Ensure each frame has:
    - A clear, generalizable description.
    - Positive triggers: lexical or semantic cues that strongly indicate the frame.
    - Anti-triggers: words, contexts, or patterns that should not activate the frame.
    - Examples and counter-examples from the passages where possible.

  At minimum, include these seven frames (refine, merge, or split if needed for clarity or non-overlap):
    - Pollution and health impacts of coal
    - Coal mining, supply and transportation
    - Corruption and illegality in the coal sector
    - Economic contributions of coal (e.g., jobs, energy production, local development)
    - Competition with renewables and the energy transition
    - Climate impacts of coal (e.g., emissions, warming, international pledges)
    - Overcapacity (i.e., when additional coal power plants are unnecessary because of surplus capacity, renewable energy growth, idle units, stranded assets, or low utilisation in general)

  Make sure the output frames are framed as **lenses or angles** in media coverage, not as opinions or sentiments.  
  Distinguish carefully between frames with similar language (e.g., “capacity additions” vs. “overcapacity”), using anti-triggers and counter-examples to prevent leakage.

classifier_corpus_sample_size: 5000

classifier:
  enabled: true
  model_name: distilbert-base-uncased
  batch_size: 8

# ---
# Example: multi-corpus with aliases shown in report legends
#
# corpus:
#   - mediacloud_meat_canada
#   - mediacloud_meat_uk
#   - mediacloud_meat_australia
# corpus_aliases:
#   mediacloud_meat_canada: "Canada"
#   mediacloud_meat_uk: "UK"
#   mediacloud_meat_australia: "Australia"
